{"version":3,"sources":["../../src/theme/default.js"],"names":["renderHeader","instance","meta","user","reactions","container","document","createElement","className","likeButton","likedReaction","find","reaction","login","innerHTML","heart","classList","add","onclick","unlike","remove","like","appendChild","issueLink","href","html_url","target","innerText","renderComments","comments","commentReactions","currentPage","error","errorBlock","permission","initHint","initButton","setAttribute","init","catch","removeAttribute","alert","e","undefined","loading","length","emptyBlock","commentsList","forEach","createDate","Date","comment","created_at","updateDate","updated_at","commentItem","avatar_url","toDateString","toString","body_html","querySelector","id","unlikeAComment","likeAComment","pageCount","Math","ceil","perPage","pagination","previousButton","goto","i","pageItem","nextButton","renderEditor","shouldDisable","disabledTip","loginning","loginLink","logout","writeField","previewField","textarea","oninput","style","height","window","getComputedStyle","parseInt","clientHeight","scrollHeight","querySelectorAll","writeTab","previewTab","focus","preview","content","value","trim","markdown","then","html","submitButton","post","state","push","data","renderFooter","render"],"mappings":"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","file":"default.js","sourcesContent":["import { github as githubIcon, heart as heartIcon, spinner as spinnerIcon } from '../icons'\nimport { NOT_INITIALIZED_ERROR } from '../constants'\n\nfunction renderHeader({ meta, user, reactions }, instance) {\n  const container = document.createElement('div')\n  container.className = 'gitment-container gitment-header-container'\n\n  const likeButton = document.createElement('span')\n  const likedReaction = reactions.find(reaction => reaction.user.login === user.login)\n  likeButton.className = 'gitment-header-like-btn'\n  likeButton.innerHTML = `\n    ${heartIcon}\n    ${ likedReaction\n      ? 'Unlike'\n      : 'Like'\n    }\n    ${ meta.reactions && meta.reactions.heart\n      ? ` • <strong>${meta.reactions.heart}</strong> Liked`\n      : ''\n    }\n  `\n  if (likedReaction) {\n    likeButton.classList.add('liked')\n    likeButton.onclick = () => instance.unlike()\n  } else {\n    likeButton.classList.remove('liked')\n    likeButton.onclick = () => instance.like()\n  }\n  container.appendChild(likeButton)\n\n  const issueLink = document.createElement('a')\n  issueLink.className = 'gitment-header-issue-link'\n  issueLink.href = meta.html_url\n  issueLink.target = '_blank'\n  issueLink.innerText = 'Issue Page'\n  container.appendChild(issueLink)\n\n  return container\n}\n\nfunction renderComments({ meta, comments, commentReactions, currentPage, user, error }, instance) {\n  const container = document.createElement('div')\n  container.className = 'gitment-container gitment-comments-container'\n\n  if (error) {\n    const errorBlock = document.createElement('div')\n    errorBlock.className = 'gitment-comments-error'\n\n    if (error === NOT_INITIALIZED_ERROR\n      && (user.permission === 'admin' || user.permission === 'write')) {\n      const initHint = document.createElement('div')\n      const initButton = document.createElement('button')\n      initButton.className = 'gitment-comments-init-btn'\n      initButton.onclick = () => {\n        initButton.setAttribute('disabled', true)\n        instance.init()\n          .catch(e => {\n            initButton.removeAttribute('disabled')\n            alert(e)\n          })\n      }\n      initButton.innerText = 'Initialize Comments'\n      initHint.appendChild(initButton)\n      errorBlock.appendChild(initHint)\n    } else {\n      errorBlock.innerText = error\n    }\n    container.appendChild(errorBlock)\n    return container\n  } else if (comments === undefined) {\n    const loading = document.createElement('div')\n    loading.innerText = 'Loading comments...'\n    loading.className = 'gitment-comments-loading'\n    container.appendChild(loading)\n    return container\n  } else if (!comments.length) {\n    const emptyBlock = document.createElement('div')\n    emptyBlock.className = 'gitment-comments-empty'\n    emptyBlock.innerText = 'No Comment Yet'\n    container.appendChild(emptyBlock)\n    return container\n  }\n\n  const commentsList = document.createElement('ul')\n  commentsList.className = 'gitment-comments-list'\n\n  comments.forEach(comment => {\n    const createDate = new Date(comment.created_at)\n    const updateDate = new Date(comment.updated_at)\n    const commentItem = document.createElement('li')\n    commentItem.className = 'gitment-comment'\n    commentItem.innerHTML = `\n      <a class=\"gitment-comment-avatar\" href=\"${comment.user.html_url}\" target=\"_blank\">\n        <img class=\"gitment-comment-avatar-img\" src=\"${comment.user.avatar_url}\"/>\n      </a>\n      <div class=\"gitment-comment-main\">\n        <div class=\"gitment-comment-header\">\n          <a class=\"gitment-comment-name\" href=\"${comment.user.html_url}\" target=\"_blank\">\n            ${comment.user.login}\n          </a>\n          commented on\n          <span title=\"${createDate}\">${createDate.toDateString()}</span>\n          ${ createDate.toString() !== updateDate.toString()\n            ? ` • <span title=\"comment was edited at ${updateDate}\">edited</span>`\n            : ''\n          }\n          <div class=\"gitment-comment-like-btn\">${heartIcon} ${comment.reactions.heart || ''}</div>\n        </div>\n        <div class=\"gitment-comment-body gitment-markdown\">${comment.body_html}</div>\n      </div>\n    `\n    const likeButton = commentItem.querySelector('.gitment-comment-like-btn')\n    const likedReaction = commentReactions[comment.id]\n      && commentReactions[comment.id].find(reaction => reaction.user.login === user.login)\n    if (likedReaction) {\n      likeButton.classList.add('liked')\n      likeButton.onclick = () => instance.unlikeAComment(comment.id)\n    } else {\n      likeButton.classList.remove('liked')\n      likeButton.onclick = () => instance.likeAComment(comment.id)\n    }\n    commentsList.appendChild(commentItem)\n  })\n\n  container.appendChild(commentsList)\n\n  if (meta) {\n    let pageCount = Math.ceil(meta.comments / instance.perPage)\n    if (pageCount > 1) {\n      const pagination = document.createElement('ul')\n      pagination.className = 'gitment-comments-pagination'\n\n      if (currentPage > 1) {\n        const previousButton = document.createElement('li')\n        previousButton.className = 'gitment-comments-page-item'\n        previousButton.innerText = 'Previous'\n        previousButton.onclick = () => instance.goto(currentPage - 1)\n        pagination.appendChild(previousButton)\n      }\n\n      for (let i = 1; i <= pageCount; i++) {\n        const pageItem = document.createElement('li')\n        pageItem.className = 'gitment-comments-page-item'\n        pageItem.innerText = i\n        pageItem.onclick = () => instance.goto(i)\n        if (currentPage === i) pageItem.classList.add('gitment-selected')\n        pagination.appendChild(pageItem)\n      }\n\n      if (currentPage < pageCount) {\n        const nextButton = document.createElement('li')\n        nextButton.className = 'gitment-comments-page-item'\n        nextButton.innerText = 'Next'\n        nextButton.onclick = () => instance.goto(currentPage + 1)\n        pagination.appendChild(nextButton)\n      }\n\n      container.appendChild(pagination)\n    }\n  }\n\n  return container\n}\n\nfunction renderEditor({ user }, instance) {\n  const container = document.createElement('div')\n  container.className = 'gitment-container gitment-editor-container'\n\n  const shouldDisable = user.login ? '' : 'disabled'\n  const disabledTip = user.login ? '' : 'Login to Comment'\n  container.innerHTML = `\n      ${ user.login\n        ? `<a class=\"gitment-editor-avatar\" href=\"${user.html_url}\" target=\"_blank\">\n            <img class=\"gitment-editor-avatar-img\" src=\"${user.avatar_url}\"/>\n          </a>`\n        : user.loginning\n          ? `<div class=\"gitment-editor-avatar\">${spinnerIcon}</div>`\n          : `<a class=\"gitment-editor-avatar\" href=\"${instance.loginLink}\" title=\"login with GitHub\">\n              ${githubIcon}\n            </a>`\n      }\n    </a>\n    <div class=\"gitment-editor-main\">\n      <div class=\"gitment-editor-header\">\n        <nav class=\"gitment-editor-tabs\">\n          <button class=\"gitment-editor-tab gitment-selected\">Write</button>\n          <button class=\"gitment-editor-tab\">Preview</button>\n        </nav>\n        <div class=\"gitment-editor-login\">\n          ${ user.login\n            ? '<a class=\"gitment-editor-logout-link\">Logout</a>'\n            : user.loginning\n              ? 'Loginning...'\n              : `<a class=\"gitment-editor-login-link\" href=\"${instance.loginLink}\">Login</a> with GitHub`\n          }\n        </div>\n      </div>\n      <div class=\"gitment-editor-body\">\n        <div class=\"gitment-editor-write-field\">\n          <textarea placeholder=\"Leave a comment\" title=\"${disabledTip}\" ${shouldDisable}></textarea>\n        </div>\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\n        </div>\n      </div>\n      <div class=\"gitment-editor-footer\">\n        <a class=\"gitment-editor-footer-tip\" href=\"https://guides.github.com/features/mastering-markdown/\" target=\"_blank\">\n          Styling with Markdown is supported\n        </a>\n        <button class=\"gitment-editor-submit\" title=\"${disabledTip}\" ${shouldDisable}>Comment</button>\n      </div>\n    </div>\n  `\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = () => instance.logout()\n  }\n\n  const writeField = container.querySelector('.gitment-editor-write-field')\n  const previewField = container.querySelector('.gitment-editor-preview-field')\n\n  const textarea = writeField.querySelector('textarea')\n  textarea.oninput = () => {\n    textarea.style.height = 'auto'\n    const style = window.getComputedStyle(textarea, null)\n    const height = parseInt(style.height, 10)\n    const clientHeight = textarea.clientHeight\n    const scrollHeight = textarea.scrollHeight\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = (height + scrollHeight - clientHeight) + 'px'\n    }\n  }\n\n  const [writeTab, previewTab] = container.querySelectorAll('.gitment-editor-tab')\n  writeTab.onclick = () => {\n    writeTab.classList.add('gitment-selected')\n    previewTab.classList.remove('gitment-selected')\n    writeField.classList.remove('gitment-hidden')\n    previewField.classList.add('gitment-hidden')\n\n    textarea.focus()\n  }\n  previewTab.onclick = () => {\n    previewTab.classList.add('gitment-selected')\n    writeTab.classList.remove('gitment-selected')\n    previewField.classList.remove('gitment-hidden')\n    writeField.classList.add('gitment-hidden')\n\n    const preview = previewField.querySelector('.gitment-editor-preview')\n    const content = textarea.value.trim()\n    if (!content) {\n      preview.innerText = 'Nothing to preview'\n      return\n    }\n\n    preview.innerText = 'Loading preview...'\n    instance.markdown(content)\n      .then(html => preview.innerHTML = html)\n  }\n\n  const submitButton = container.querySelector('.gitment-editor-submit')\n  submitButton.onclick = () => {\n    submitButton.innerText = 'Submitting...'\n    submitButton.setAttribute('disabled', true)\n    instance.post(textarea.value.trim())\n      .then(data => {\n        textarea.value = ''\n        instance.state.comments.push(data)\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = 'Comment'\n      })\n      .catch(e => {\n        alert(e)\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = 'Comment'\n      })\n  }\n\n  return container\n}\n\nfunction renderFooter() {\n  const container = document.createElement('div')\n  container.className = 'gitment-container gitment-footer-container'\n  container.innerHTML = `\n    Powered by\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/imsun/gitment\" target=\"_blank\">\n      Gitment\n    </a>\n  `\n  return container\n}\n\nfunction render(state, instance) {\n  const container = document.createElement('div')\n  container.className = 'gitment-container gitment-root-container'\n  container.appendChild(instance.renderHeader(state, instance))\n  container.appendChild(instance.renderComments(state, instance))\n  container.appendChild(instance.renderEditor(state, instance))\n  container.appendChild(instance.renderFooter(state, instance))\n  return container\n}\n\nexport default { render, renderHeader, renderComments, renderEditor, renderFooter }\n"]}